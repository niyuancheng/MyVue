{"version":3,"file":"vue.js","sources":["../src/mergeOptions.js","../src/data/array.js","../src/data/dep.js","../src/data/index.js","../src/nextTick.js","../src/data/watcher.js","../src/template/gen.js","../src/template/parse.js","../src/template/index.js","../src/hooks.js","../src/utils/getFuncName.js","../src/initMixin.js","../src/vdom/index.js","../src/vdom/updateChildren.js","../src/vdom/patchVNode.js","../src/vdom/patch.js","../src/initLifecycle.js","../src/initGlobal.js","../src/index.js"],"sourcesContent":["let LIFECYCLE = [ //存放Vue实例的生命周期数组\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    'beforeUpdate',\r\n    'updated',\r\n    'beforeDestory',\r\n    'destoryed'\r\n]\r\n\r\nlet strategy = {} //策略数组\r\n\r\nstrategy['components'] = function(p,c) {\r\n    if(p && c) {   \r\n        \r\n    }\r\n}\r\n\r\nLIFECYCLE.forEach(hook=>{ //对于所有的生命周期钩子其具体的更新策略\r\n    strategy[hook] = function(p,c) {\r\n        if(p) {\r\n            if(c) {\r\n                return p.concat(c);\r\n            } else {\r\n                return p;\r\n            }\r\n        } else {\r\n            return [c];\r\n        }\r\n    }\r\n})\r\n\r\nexport default function mergeOptions(parent,child) {\r\n\r\n    const options = {};\r\n\r\n    for(let key in parent) {\r\n        mergeFiled(key);\r\n    }\r\n    for(let key in child) {\r\n        if(!parent.hasOwnProperty(key)) mergeFiled(key);\r\n    }\r\n\r\n    function mergeFiled(key) { //对于不同的key有不同的合并策略，例如对于key = data时合并需要新的覆盖旧的选项，而对于key = created这种生命周期钩子则需要合并成一个数组\r\n        if(strategy[key]) {\r\n            options[key] = strategy[key](parent[key],child[key])\r\n        } else { //如果对应的key在策略数组中不存在的话则进行默认的合并方式也就是新的覆盖旧的,子覆盖父\r\n            options[key] = child[key] || parent[key];\r\n        }\r\n    }\r\n\r\n    return options;\r\n}","import observe from \"./index\";\r\n\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'unshift',\r\n    'shift',\r\n    'splice',\r\n    'sort'\r\n]\r\n\r\nvar arrMethods = {}; //arrMethods用于拦截实例数组调用对应的方法\r\n\r\nmethods.forEach(el=>{\r\n    let method = Array.prototype[el]; //将数组原型上的真正方法保存下来\r\n    arrMethods[el] = function() {\r\n        console.log(`触发了数组的${method}方法`)\r\n        switch(el) { //判断具体的调用方法\r\n            case \"push\":\r\n            case \"unshift\":\r\n                Array.from(arguments).forEach(item=>{\r\n                    observe(item);\r\n                })\r\n                break;\r\n            case \"pop\":\r\n            case \"shift\":\r\n                break;\r\n            case \"splice\":\r\n                Array.from(arguments).slice(2).forEach(item=>{\r\n                    observe(item);\r\n                })\r\n                break;\r\n            case 'sort':\r\n                \r\n                break;\r\n        }\r\n        this.__ob__.dep.notify();\r\n        return method.apply(this,arguments);\r\n    }\r\n})\r\n\r\nexport default arrMethods","let id = 0;\r\n\r\nclass Dep {\r\n    constructor() {\r\n        this.id = id++; //id唯一标识一个watcher，也就是说每一个watcher都有一个独有的id号\r\n        this.subs = []; //存储着dep的监听者也就是观察者，当Dep实例对应的属性发生改变时，对应subs中存储的观察者就会触发调用\r\n    }\r\n\r\n    depend() { //get时添加依赖\r\n        if (!this.subs.includes(Dep.target)) {\r\n            this.subs.push(Dep.target);\r\n            if (!Dep.target.deps.includes(this)) {\r\n                Dep.target.deps.push(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    notify() { //set时触发依赖\r\n        this.subs.forEach(watcher => {\r\n            watcher.update();\r\n        })\r\n    }\r\n}\r\n\r\nexport default Dep;","//此模块用于实现数据的响应式    \r\n\r\nimport arrMethods from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nfunction observe(obj) { //observe函数的中作用就是为了将obj对象中的属性都变为访问器属性\r\n    let ob;\r\n    if(typeof obj !== \"object\") return;\r\n    if (obj.__ob__) { // 该对象有__ob__则不进行递归\r\n        ob = obj.__ob__; //给对象添加__ob__表示该对象被观察了，方便程序员的调试\r\n    } else {\r\n        ob = new Observer(obj); //通过new Observer类来标记该对象，也就是给obj上添加__ob__属性来实现观测状态的标记，防止循环引用\r\n    }\r\n    return ob;\r\n}\r\n\r\nclass Observer {\r\n    constructor(obj) {\r\n        obj.__ob__ = this;\r\n        this.dep = new Dep(); //dep可以看成是依赖收集器\r\n        Object.defineProperty(obj,\"__ob__\",{\r\n            enumerable:false,\r\n            writable:false,\r\n            configurable:false\r\n        })\r\n        if(Array.isArray(obj)) {\r\n            this.walkArray(obj)\r\n        } else {\r\n            this.walk(obj)\r\n        }\r\n    }\r\n\r\n    walk(obj) {\r\n        Object.keys(obj).forEach(key=>{\r\n            defineReactive(obj,key)\r\n        })\r\n    }\r\n\r\n    walkArray(obj) {\r\n        Object.setPrototypeOf(obj,arrMethods);\r\n        for(let el of obj) {\r\n            observe(el);\r\n        }\r\n    }\r\n}\r\n\r\nfunction dependArray(arr) { //递归地为每一个数组都添加dep收集器属性，一旦当发生数组的push,pop等改变原数组的方法时触发watcher的调用也就是模板的重新编译\r\n    if(Array.isArray(arr)) {\r\n        arr.__ob__.dep.depend();\r\n        for(let el of arr) dependArray(el)\r\n    }\r\n}\r\n\r\n//递归地定义响应式数据\r\nfunction defineReactive(obj,key,data) {\r\n    data = data || obj[key];\r\n    let dep = new Dep(); //每一个属性都对应一个Dep的实例\r\n    observe(obj[key]); //先将obj[key]对应的属性值也变成响应式的\r\n    Object.defineProperty(obj,key,{\r\n        get() { //get时收集依赖\r\n            if(Dep.target) {\r\n                dep.depend();\r\n                if(Array.isArray(data)) {\r\n                    dependArray(data);\r\n                }\r\n            }\r\n            return data;\r\n        },\r\n        set(newVal) { //set时触发依赖\r\n            if(newVal !== data) {\r\n                observe(newVal); //先将传入的newVal也变成访问器属性\r\n                data = newVal;\r\n                dep.notify();\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport default observe;","export function nextTick(fn) {\r\n    Promise.resolve().then(()=>fn());\r\n}","import Dep from \"./dep\";\r\nimport { nextTick } from '../nextTick'\r\nlet id = 0;\r\n\r\nlet stack = [];\r\nfunction pushTarget(watcher) {\r\n    stack.push(watcher);\r\n    Dep.target = watcher;\r\n}\r\n\r\nfunction popTarget() {\r\n    stack.pop();\r\n    Dep.target = stack[stack.length - 1];\r\n}\r\n\r\nclass Watcher {\r\n    constructor(vm, fn, options,cb) {\r\n        this.vm = vm;\r\n        this.id = id++;\r\n        this.getter = fn; //fn很大概率为渲染视图的函数\r\n        this.deps = []; //deps数组中存储着该观察者订阅了多少了变量对象\r\n        this.cb = cb || (()=>{});\r\n        if(options) {\r\n            this.lazy = options.lazy || false;\r\n            this.dirty = this.lazy;\r\n            this.user = options.user;\r\n        }\r\n        \r\n        if(!this.dirty) this.value = this.get();\r\n    }\r\n\r\n    evaluate() {\r\n        this.dirty = false;\r\n        return this.get();\r\n    }\r\n\r\n    depend() {\r\n        this.deps.forEach(dep=>{\r\n            dep.depend();\r\n        })\r\n    }\r\n\r\n    get() {\r\n        pushTarget(this);\r\n        let value = this.getter.call(this.vm);\r\n        popTarget();\r\n        return value;\r\n    }\r\n\r\n    update() { //当watcher依赖的属性发生变化的时候执行watcher中的update方法\r\n        if(this.user) { \r\n            let oldVal = this.value;\r\n            let newVal = this.get();\r\n            this.cb.call(this.vm,newVal,oldVal);\r\n        } else {\r\n            if(this.lazy) {\r\n                this.dirty = true;\r\n            } else {\r\n                queueWatcher(this);\r\n            }\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    run() { //启动watcher的执行\r\n        this.get();\r\n    }\r\n}\r\n\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;\r\n\r\nfunction flushScheduleQueue() { //实现视图的异步更新\r\n    let coppyQueue = queue.slice(0);\r\n    queue = [];\r\n    has = {};\r\n    pending = false;\r\n    coppyQueue.forEach(watcher => {\r\n        watcher.run();\r\n    })\r\n}\r\n\r\nfunction queueWatcher(watcher) {\r\n    const id = watcher.id;\r\n    if (!has[id]) {\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        if (!pending) {\r\n            pending = true;\r\n            nextTick(flushScheduleQueue);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher;","const ELEMENT_TYPE = 1; //元素节点\r\nconst TEXT_TYPE = 2; //文本节点\r\nconst textRegExp = /\\{\\{\\s*(.+?)\\}\\}/g //匹配mustache模板字符串\r\nfunction genText(text) { //用于生成mustache类型的模板字符串\r\n    if(textRegExp.test(text)) {\r\n        let match;\r\n        let tokens = [];\r\n        textRegExp.lastIndex = 0;\r\n        let lastIndex = textRegExp.lastIndex;\r\n        while(match = textRegExp.exec(text)) {\r\n            let index = match.index;\r\n            if(index>lastIndex) tokens.push(`${JSON.stringify(text.slice(lastIndex,index))}`);\r\n            tokens.push(`_s(${match[1]})`);\r\n            lastIndex = textRegExp.lastIndex;\r\n        }\r\n        tokens.push(`${JSON.stringify(text.slice(lastIndex))}`);\r\n        return `_v(${tokens.join(\"+\")})`\r\n    } else {\r\n        return `_v(${JSON.stringify(text)})`\r\n    }\r\n}\r\n\r\nfunction genChildren(children) { //生成子节点对应的字符串\r\n    let res = ``;\r\n    res += `[`;\r\n\r\n    res += children.map(child => {\r\n        //首先判断节点类型\r\n        if (child.type === ELEMENT_TYPE) { //元素节点的话\r\n            return `${genCode(child)}`;\r\n        } else if (child.type === TEXT_TYPE) { //文本节点的话\r\n            return `${genText(child.text)}`;\r\n        }\r\n    }).join(\",\");\r\n    res += ']';\r\n    return res;\r\n}\r\n\r\nfunction genProps(attrs) {\r\n    let res = `{`;\r\n    res += attrs.map(attr => {\r\n        if (attr.key !== \"style\" && attr.key!==\"v-bind:style\") { //如果该属性值不为style的话\r\n            return `${attr.key}:${JSON.stringify(attr.value)}`;\r\n        } else {\r\n            let str = ``;\r\n            str += `style:{`;\r\n            str += attr.value.split(\";\").map(obj => {\r\n                let [key, value] = obj.split(\":\");\r\n                return `${key}:${JSON.stringify(value)}`;\r\n            }).join(\",\");\r\n            str += `}`;\r\n            return str;\r\n        }\r\n    }).join(\",\");\r\n    res += `}`;\r\n    return res;\r\n}\r\n\r\nexport function genCode(node) { //根据AST语法树拼接JS字符串\r\n    return `_c(${JSON.stringify(node.tagName)}${node.attrs.length === 0 ? \",undefined\" : \",\" + genProps(node.attrs)}${node.children.length > 0 ? \",\" + genChildren(node.children) : \"\"})`\r\n}","const cname = `[a-zA-Z_][\\\\-\\\\.a-zA-Z0-9_]*` //标签可能出现的所有标签名\r\nconst qnameCapture = `((?:${cname}:)?${cname})` //考虑到带有命名空间的标签出现的情况因此在此处使用(?:${cname}:)?表明括号中的捕获重复0-1次\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //开始标签的前面open部分，也就是 < 往后的标签名部分\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst startTagClosed = /^\\s*(\\/)?>/ //开始标签的结束部分，(\\/)?是防止该标签是自闭合标签 ，例如<input xx />\r\nconst attribute = /^\\s*([^\\s'\"<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"|'([^']*)'|([^\\s'\"<>\\/=]+)))?/ //匹配标签中的属性，格式为key= value\r\n\r\n//parseHtml用于解析模板生成AST抽象语法树\r\nexport function parseHTML(html) {\r\n    const ELEMENT_TYPE = 1; //元素节点\r\n    const TEXT_TYPE = 2; //文本节点\r\n    const ROOT_TYPE = 3;\r\n    const root = {\r\n        children:[],\r\n        type:ROOT_TYPE,\r\n        parent:null,\r\n        tagName:\"Root\"\r\n    }\r\n    const stack = [root];\r\n    let textEnd;\r\n    function advance(n) {\r\n        html = html.slice(n);\r\n    }\r\n\r\n    function parseStartTagOpen() {\r\n        let tagName = html.match(startTagOpen)[1];\r\n        let resName = html.match(startTagOpen)[0];\r\n\r\n        let tag = {\r\n            tagName,\r\n            parent: stack[stack.length - 1] || null,\r\n            children: [],\r\n            attrs: [],\r\n            type:ELEMENT_TYPE\r\n        }\r\n        stack[stack.length-1].children.push(tag);\r\n        stack.push(tag);\r\n        \r\n        advance(resName.length);\r\n    }\r\n    function parseAttrs() { //解析标签中的所有属性\r\n        let currentNode = stack[stack.length - 1];\r\n        while (!startTagClosed.test(html)) {\r\n            let resArry = html.match(attribute);\r\n            let attr = {\r\n                key: resArry[1],\r\n                value: resArry[3] || resArry[4] || resArry[5] || true\r\n            }\r\n            currentNode.attrs.push(attr);\r\n            advance(html.match(attribute)[0].length);\r\n        }\r\n    }\r\n\r\n    function parseStartTagClosed() { //处理开始标签的末尾/结束部分\r\n        let resName = html.match(startTagClosed)[0];\r\n        advance(resName.length);\r\n    }\r\n\r\n    function parseEndTag() {\r\n        let resName = html.match(endTag)[0];\r\n        stack.pop();\r\n        advance(resName.length);\r\n    }\r\n\r\n    function parseText() {\r\n        let text = html.substr(0, textEnd);\r\n        if(/[^\\s]+/.test(text)) stack[stack.length-1].children.push({\r\n            text,\r\n            type:TEXT_TYPE,\r\n            parent:stack[stack.length-1] || null\r\n        })\r\n        advance(text.length);\r\n    }\r\n\r\n    while (html.length) {\r\n        textEnd = html.indexOf(\"<\");\r\n        if (textEnd === 0) {\r\n            if (!endTag.test(html)) { //如果该<字符是开始标签上的字符时\r\n                parseStartTagOpen();\r\n                parseAttrs();\r\n                parseStartTagClosed();\r\n            } else {\r\n                parseEndTag();\r\n            }\r\n        } else {\r\n            parseText();\r\n        }\r\n    }\r\n\r\n    return root;\r\n\r\n}","import { genCode } from \"./gen\"\r\nimport { parseHTML } from \"./parse\"\r\n\r\n//该模块用于模板编译功能的实现\r\nexport default function compileToFunction(html) {\r\n    //1.生成AST抽象语法树\r\n    let ast = parseHTML(html);\r\n\r\n    //2.根据抽象语法树生成JS字符串\r\n    let code = genCode(ast.children[0]);\r\n\r\n    let render = new Function(`with(this){return ${code}}`); //通过new Function这种形式形成最终的render函数\r\n\r\n    console.log(render);\r\n\r\n    return render;\r\n}","export function callHooks(vm,hooks) { //触发特定的生命周期钩子函数\r\n    if(vm.$options[hooks]) {\r\n        vm.$options[hooks].forEach(hook=>{\r\n            hook.call(vm)\r\n        });\r\n    }\r\n}","export default function getFunctionName(fun) {\r\n    if (fun.name !== undefined)\r\n        return fun.name;\r\n    var ret = fun.toString();\r\n    ret = ret.substr('function '.length);\r\n    ret = ret.substr(0, ret.indexOf('('));\r\n    return ret;\r\n}","import observe from \"./data/index\";\r\nimport Watcher from \"./data/watcher\";\r\nimport mergeOptions from \"./mergeOptions\";\r\nimport { nextTick } from \"./nextTick\";\r\nimport compileToFunction from \"./template/index.js\";\r\nimport { callHooks } from './hooks'\r\nimport getFuncName from './utils/getFuncName'\r\nimport Dep from \"./data/dep\";\r\n//该函数用于对Vue的状态进行初始化\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        let vm = this;\r\n        vm.$options = mergeOptions(Vue.options, options);\r\n        callHooks(vm, 'beforeCreate')\r\n        initState(vm); //对options中的所有配置选项进行初始化，包括data.props,method,watch,computed,direactives等\r\n        callHooks(vm, 'created');\r\n        initTemplate(vm); //在传入的配置选项全部初始化完成后开始执行模板的编译生成虚拟DOM\r\n    }\r\n\r\n    Vue.prototype.$mount = function (el) { //$mount函数的作用就是开始模板编译生成render函数的过程并且将render生成的虚拟DOM渲染成真实的DOM并且挂载到DOM树上\r\n        let vm = this;\r\n        let opts = vm.$options;\r\n        if (!opts.render) { //如果没有render函数的话则需要进行模板编译\r\n            let template;\r\n            if (opts.template) { //template的优先级大于el\r\n                template = opts.template;\r\n            } else {\r\n                template = document.querySelector(el).outerHTML;\r\n            }\r\n            opts.render = compileToFunction(template); //compileToFunction开始进入模板编译阶段\r\n        } else { //如果有render函数的话则直接进行调用，无需经过模板编译的过程\r\n            //此处直接跳过\r\n        }\r\n        mountComponent(el, vm); //生成并且渲染虚拟DOM上树\r\n    }\r\n\r\n    Vue.prototype.$nextTick = nextTick;\r\n\r\n    Vue.prototype.$watch = function (expr, cb) {\r\n        let fn = () => this[expr];\r\n\r\n        return new Watcher(this, fn, { user: true }, cb)\r\n    }\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = typeof vm.$options.data === 'function' ? vm.$options.data() : vm.$options.data\r\n    observe(data);\r\n    vm._data = data; //数据劫持\r\n    for (let key in data) {\r\n        //直接将data中的属性绑定到vm实例上，进行了一次数据代理\r\n        Object.defineProperty(vm, key, {\r\n            get() {\r\n                return data[key];\r\n            },\r\n            set(val) {\r\n                data[key] = val;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nfunction getComputedProperty(context, key) {\r\n    return function () {\r\n        let watcher = context._computedWatchers[key]\r\n        if (watcher.dirty) {\r\n            watcher.value = watcher.evaluate();\r\n            if (Dep.target) {\r\n                watcher.depend();\r\n            }\r\n        }\r\n        return watcher.value;\r\n    }\r\n}\r\n\r\nfunction defineComputedProperty(vm, key, computed) {\r\n    let getter = typeof computed === 'function' ? computed : computed.get;\r\n    let setter = typeof computed === 'function' ? (() => { }) : (computed.set || (() => { }));\r\n    let name = typeof computed === 'function' ? getFuncName(computed) : computed;\r\n\r\n    Object.defineProperty(vm, name, {\r\n        get: getComputedProperty(vm, key),\r\n        set: setter\r\n    });\r\n}\r\n\r\nfunction initComputed(vm) { //初始化计算属性\r\n    let computeds = vm.$options.computed;\r\n    let watchers = vm._computedWatchers = {};\r\n    for (let key in computeds) {\r\n        let getter = typeof computeds[key] === 'function' ? computeds[key] : computeds[key].get;\r\n        watchers[key] = new Watcher(vm, getter, { lazy: true });\r\n        defineComputedProperty(vm, key, computeds[key]);\r\n    }\r\n}\r\n\r\nfunction initWatch(vm) { //初始化监视属性\r\n    let watches = vm.$options.watch;\r\n    for (let key in watches) {\r\n        let watch = watches[key];\r\n        let handler = typeof watch === 'function' ? watch : watch.handler;\r\n        let propName = typeof watch === 'function' ? getFuncName(watch) : key;\r\n\r\n        vm.$watch(propName, handler);\r\n    }\r\n\r\n}\r\n\r\nfunction initState(vm) {\r\n    let opts = vm.$options;\r\n    if (opts.data) {\r\n        initData(vm); //初始化数据\r\n    }\r\n    if (opts.computed) {\r\n        initComputed(vm); //初始化计算属性\r\n    }\r\n    if (opts.watch) {\r\n        initWatch(vm);\r\n    }\r\n}\r\n\r\nfunction initTemplate(vm) {\r\n    if (vm.$options.el) { //如果options中包含有el属性则自动调用$mount方法进行模板编译过程\r\n        vm.$mount(vm.$options.el);\r\n    }\r\n}\r\n\r\nfunction mountComponent(el, vm) {\r\n\r\n    let updateComponet = () => { //模板的重新编译或者初次编译\r\n        let dom;\r\n        if (vm._vnode) {\r\n            dom = vm._vnode;\r\n        } else {\r\n            dom = document.querySelector(el);\r\n        }\r\n        vm._update(dom);\r\n    }\r\n    let watcher = new Watcher(vm, updateComponet); //watcher观察者，通常一个Vue实例或者一个Vue组件对应一个Watcher实例，也就是观察者对象\r\n\r\n}","function vnode(vm,tag,key,props,children,text) { //该函数用于生成虚拟dom节点\r\n    return {\r\n        vm,\r\n        tag,\r\n        key,\r\n        props,\r\n        children,\r\n        text\r\n    }\r\n}\r\n\r\n\r\nexport function createElementVNode(vm,tag,props,children) { //创建元素类型的虚拟节点\r\n    if(!props) props = {};\r\n    let key = props.key;\r\n    if(props.key) delete props.key;\r\n    return vnode(vm,tag,key,props,children,undefined);\r\n}\r\n\r\nexport function createTextVNode(vm,text) { //创建文本类型的节点\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text);\r\n}","import { isSame } from \"./patch\";\r\nimport { patchVNode } from \"./patchVNode\";\r\n\r\nexport function updateChildren(parentNode, oldCh, newCh) {\r\n    //我们需要注意的是diff算法本质上比较的是新旧虚拟节点，改变的是真正的DOM元素\r\n    console.log(oldCh);\r\n    console.log(newCh);\r\n    //新旧指针\r\n    let oldStartIdx = 0,\r\n        oldEndIdx = oldCh.length - 1,\r\n        newStartIdx = 0,\r\n        newEndIdx = newCh.length - 1;\r\n    //新旧节点\r\n    let oldStartVnode = oldCh[0],\r\n        oldEndVnode = oldCh[oldEndIdx],\r\n        newStartVnode = newCh[0],\r\n        newEndVnode = newCh[newEndIdx];\r\n\r\n    let map = {}; //进行旧节点上key和下标index之间的映射，也就是缓存策略\r\n    for (let i = oldStartIdx; i <= oldEndIdx; i++) {\r\n        map[oldCh[i].key] = i;\r\n    }\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n        //开始进行四次命中策略\r\n        // 1.旧前和新前对比,命中是同一个节点的话，更新这两个节点\r\n        if (isSame(oldStartVnode, newStartVnode)) {\r\n            // console.log(\"旧前和新前命中\");\r\n            patchVNode(oldStartVnode, newStartVnode); //对于相同的节点调用patchVnode对节点的内部进行最小量更新\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            if (!oldStartVnode) oldStartVnode = oldCh[++oldStartIdx];\r\n            newStartVnode = newCh[++newStartIdx];//指针向下移\r\n        } else if (isSame(oldEndVnode, newEndVnode)) {\r\n            // console.log(\"旧后和新后命中\");\r\n            patchVNode(oldEndVnode, newEndVnode);\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            if (!oldEndVnode) oldEndVnode = oldCh[--oldEndIdx];\r\n            newEndVnode = newCh[--newEndIdx];\r\n        } else if (isSame(oldStartVnode, newEndVnode)) {\r\n            // console.log(\"旧前和新后命中\");\r\n            patchVNode(oldStartVnode, newEndVnode);\r\n            // 意味着此时需要移动旧前指向的节点\r\n            parentNode.insertBefore(oldStartVnode.dom, oldEndVnode.dom.nextSibling);\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            if (!oldStartVnode) oldStartVnode = oldCh[++oldStartIdx];\r\n            newEndVnode = newCh[--newEndIdx];\r\n        } else if (isSame(oldEndVnode, newStartVnode)) {\r\n            // console.log(\"旧后和新前命中\");\r\n            patchVNode(oldEndVnode, newStartVnode);\r\n\r\n            parentNode.insertBefore(oldEndVnode.dom, oldStartVnode.dom); //将旧后节点插入到旧前的节点之前\r\n\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            if (!oldEndVnode) oldEndVnode = oldCh[--oldEndIdx];\r\n            newStartVnode = newCh[++newStartIdx];\r\n        } else { //如果四种情况都没有命中的话，则需要查找newStartVnode对应的在老节点中的下标\r\n            let vnodeInOld = map[newStartVnode.key] || undefined;\r\n            if (vnodeInOld !== undefined) {\r\n                parentNode.insertBefore(oldCh[vnodeInOld].dom, oldCh[oldStartIdx].dom);\r\n                oldCh[vnodeInOld] = undefined;\r\n            } else { //如果查找新节点在老节点中不存在的话则直接创建并且插入到oldStartIdx之前\r\n                parentNode.insertBefore(createElement(newCh[newStartIdx]), oldCh[oldStartIdx].dom);\r\n            }\r\n            newStartVnode = newCh[++newStartIdx];\r\n        }\r\n\r\n    }\r\n    //1. 在所有循环都结束后来查看指针的情况，看看还有没有节点遗留在外面的\r\n    if (newStartIdx <= newEndIdx) { //说明有新的节点需要插入到老节点中去\r\n        let pivot = oldCh[oldEndIdx] ? oldCh[oldEndIdx].dom.nextSibling : null;\r\n        for (let i = newStartIdx; i <= newEndIdx; i++) {\r\n            parentNode.insertBefore(createElement(newCh[i]), pivot);\r\n        }\r\n    } else if (oldStartIdx <= oldEndIdx) { //说明还有老节点需要删除\r\n        for (let i = oldStartIdx; i <= oldEndIdx; i++) {\r\n            if (oldCh[i].dom) {\r\n                parentNode.removeChild(oldCh[i].dom);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { createElement, isSame } from \"./patch\";\r\nimport { updateChildren } from \"./updateChildren\";\r\n\r\nexport function patchVNode(oldVNode, newVNode) { //该函数用于比较两个虚拟节点进行最小量的更新\r\n    if (!isSame(oldVNode, newVNode)) {\r\n        //如果不是相同节点，则拆除旧的，用新的节点来替换\r\n        let dom = createElement(newVNode);\r\n        oldVNode.el.parentNode.replaceChild(dom, oldVNode.el);\r\n    } else {\r\n        if (newVNode.text) {\r\n            oldVNode.el.parentNode.innerHTML = newVNode.text;\r\n        } else {\r\n            if (oldVNode.text) {\r\n                let dom = createElement(newVNode);\r\n                oldVNode.el.parentNode.appendChild(dom);\r\n                oldVNode.el.parentNode.removeChild(oldVNode.el);\r\n            } else {\r\n                //如果是相同的节点则先更新节点的属性\r\n                updateProps(oldVNode, newVNode);\r\n                if (!oldVNode.children) {\r\n                    let children = newVNode.children || [];\r\n                    for (let child of children) {\r\n                        let dom = createElement(child);\r\n                        oldVNode.el.appendChild(dom);\r\n                    }\r\n                } else if (!newVNode.children) {\r\n                    oldVNode.el.innerHTML = \"\";\r\n                } else if (oldVNode.children && newVNode.children) {\r\n                    updateChildren(oldVNode.el, oldVNode.children, newVNode.children);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function updateProps(oldVNode, newVNode) {\r\n    let oldProps = oldVNode.props;\r\n    let newProps = newVNode.props;\r\n\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let item in newProps.style) {\r\n                oldVNode.el.style[item] = newProps.style[item];\r\n            }\r\n        } else {\r\n            oldVNode.el[key] = newProps[key];\r\n        }\r\n    }\r\n\r\n    for (let key in oldProps) {\r\n        if (!newProps[key]) {\r\n            oldVNode.el.removeAttribute(key);\r\n        } else {\r\n            if (key === 'style') {\r\n                let oldStyle = oldProps.style;\r\n                let newStyle = newProps.style;\r\n                updateStyle(oldStyle, newStyle, oldVNode.el);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction updateStyle(oldStyle, newStyle, el) {\r\n    for (let key in oldStyle) {\r\n        if (!newStyle[key]) {\r\n            el.style.removeAttribute(key);\r\n        }\r\n    }\r\n\r\n    for (let key in newStyle) {\r\n        el.style[key] = newStyle[key];\r\n    }\r\n}","import { patchVNode } from \"./patchVNode\";\r\n\r\nfunction appendAttrs(vnode) {\r\n    for (let key in vnode.props) {\r\n        if (key === 'style') {\r\n            for (let item in vnode.props.style) {\r\n                vnode.el.style[item] = vnode.props.style[item];\r\n            }\r\n        } else {\r\n            vnode.el.setAttribute(key, vnode.props[key]);\r\n        }\r\n    }\r\n}\r\nexport function createElement(vnode) { //根据虚拟节点vnode创建对应的真实DOM元素\r\n    if (vnode.tag) {\r\n        vnode.el = document.createElement(vnode.tag);\r\n        appendAttrs(vnode);\r\n        if (vnode.children) {\r\n            vnode.children.forEach(child => {\r\n                vnode.el.appendChild(createElement(child));\r\n            })\r\n        }\r\n    } else {\r\n        vnode.el = document.createTextNode(vnode.text);\r\n    }\r\n    return vnode.el;\r\n\r\n}\r\n\r\nexport function isSame(vnode1, vnode2) { //判断是否为同一虚拟节点\r\n    return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key;\r\n}\r\n\r\nexport function patch(oldVNode, newVNode, vm) {\r\n    if (oldVNode.nodeType === 1) { //如果是真实的DOM元素的话则进行初次渲染\r\n        let dom = createElement(newVNode);\r\n        oldVNode.parentNode.insertBefore(dom, oldVNode.nextSibling);\r\n        oldVNode.parentNode.removeChild(oldVNode);\r\n        oldVNode.el = dom;\r\n    } else { //如果不是则需要进入diff算法环节比较新旧虚拟节点的差异\r\n        console.log(\"diff算法\");\r\n        patchVNode(oldVNode, newVNode);\r\n        newVNode.el = oldVNode.el;\r\n    }\r\n    //根据diff算法更新旧的真实DOM节点\r\n    vm._vnode = newVNode;\r\n}","import { createElementVNode, createTextVNode } from \"./vdom/index\" //创建不同类型的虚拟节点\r\nimport { patch } from \"./vdom/patch\";\r\n\r\n\r\nexport function initLifeCycle(Vue) {\r\n    Vue.prototype._c = function(tag,props,children) { //创建元素节点\r\n        return createElementVNode(this,...arguments);\r\n    }\r\n\r\n    Vue.prototype._s = function(val) { \r\n        if(typeof val ==='object') {\r\n            val = JSON.stringify(val); //触发了data中数据的set方法\r\n        }\r\n        return val;\r\n    }\r\n\r\n    Vue.prototype._v = function(text) { //创建文本节点\r\n        return createTextVNode(this,text);\r\n    }\r\n\r\n    Vue.prototype._render = function() { //调用vm实例上的render函数创建对应的虚拟DOM\r\n        let vm = this;\r\n        return vm.$options.render.call(vm); //所谓的render函数就是之前拼接字符串生成的函数\r\n    }\r\n\r\n    Vue.prototype._update = function(el) { //将虚拟DOM转变为真实DOM并且挂载到DOM树上\r\n        let vm = this;\r\n        let vdom = vm._render();\r\n        console.log(vdom);\r\n        patch(el,vdom,vm);\r\n    }\r\n}\r\n","import mergeOptions from \"./mergeOptions\"\r\n\r\nexport function initGlobal(Vue) {\r\n    Vue.mixin = function(options) { //给Vue构造函数上添加全局的api函数\r\n        Vue.options = mergeOptions(Vue.options,options)\r\n    }\r\n\r\n    Vue.extend = function(options) { //该静态方法用于生成组件的实例对象\r\n\r\n        function Sub() { //Sub是Vue的子类\r\n            this._init(options);\r\n        }\r\n\r\n        Sub.prototype = Object.create(Vue.prototype);\r\n        Sub.prototype.constructor = Sub;\r\n\r\n        Sub.extendOptions = options;\r\n        return Sub;\r\n    }\r\n\r\n    Vue.component = function(name,component) { //申明一个全局组件\r\n        component = typeof component === 'function' ? component : Vue.extend(component);\r\n\r\n        Vue.options.components[name] = component;\r\n    }\r\n}","import mergeOptions from \"./mergeOptions\";\r\nimport { initMixin } from \"./initMixin\";\r\nimport { initLifeCycle } from \"./initLifecycle\";\r\nimport { initGlobal } from \"./initGlobal\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options); //初始化Vue\r\n}\r\n\r\nVue.options = {};//全局的公共配置选项\r\nVue.options.components = {}\r\n\r\n//init...方法是向vue实例的原型对象上添加方法\r\ninitLifeCycle(Vue);\r\ninitMixin(Vue);\r\ninitGlobal(Vue);\r\n\r\nexport default Vue;"],"names":["LIFECYCLE","strategy","p","c","forEach","hook","concat","mergeOptions","parent","child","options","key","mergeFiled","hasOwnProperty","methods","arrMethods","el","method","Array","prototype","console","log","from","arguments","item","observe","slice","__ob__","dep","notify","apply","id","Dep","subs","includes","target","push","deps","watcher","update","obj","ob","Observer","Object","defineProperty","enumerable","writable","configurable","isArray","walkArray","walk","keys","defineReactive","setPrototypeOf","dependArray","arr","depend","data","get","set","newVal","nextTick","fn","Promise","resolve","then","stack","pushTarget","popTarget","pop","length","Watcher","vm","cb","getter","lazy","dirty","user","value","call","oldVal","queueWatcher","queue","has","pending","flushScheduleQueue","coppyQueue","run","ELEMENT_TYPE","TEXT_TYPE","textRegExp","genText","text","test","match","tokens","lastIndex","exec","index","JSON","stringify","join","genChildren","children","res","map","type","genCode","genProps","attrs","attr","str","split","node","tagName","cname","qnameCapture","startTagOpen","RegExp","endTag","startTagClosed","attribute","parseHTML","html","ROOT_TYPE","root","textEnd","advance","n","parseStartTagOpen","resName","tag","parseAttrs","currentNode","resArry","parseStartTagClosed","parseEndTag","parseText","substr","indexOf","compileToFunction","ast","code","render","Function","callHooks","hooks","$options","getFunctionName","fun","name","undefined","ret","toString","initMixin","Vue","_init","initState","initTemplate","$mount","opts","template","document","querySelector","outerHTML","mountComponent","$nextTick","$watch","expr","initData","_data","val","getComputedProperty","context","_computedWatchers","evaluate","defineComputedProperty","computed","setter","getFuncName","initComputed","computeds","watchers","initWatch","watches","watch","handler","propName","updateComponet","dom","_vnode","_update","vnode","props","createElementVNode","createTextVNode","updateChildren","parentNode","oldCh","newCh","oldStartIdx","oldEndIdx","newStartIdx","newEndIdx","oldStartVnode","oldEndVnode","newStartVnode","newEndVnode","i","isSame","patchVNode","insertBefore","nextSibling","vnodeInOld","createElement","pivot","removeChild","oldVNode","newVNode","replaceChild","innerHTML","appendChild","updateProps","oldProps","newProps","style","removeAttribute","oldStyle","newStyle","updateStyle","appendAttrs","setAttribute","createTextNode","vnode1","vnode2","patch","nodeType","initLifeCycle","_c","_s","_v","_render","vdom","initGlobal","mixin","extend","Sub","create","constructor","extendOptions","component","components"],"mappings":"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"}
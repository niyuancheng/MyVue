{"version":3,"file":"vue.js","sources":["../src/data/array.js","../src/data/dep.js","../src/data/index.js","../src/nextTick.js","../src/data/watcher.js","../src/mergeOptions.js","../src/template/gen.js","../src/template/parse.js","../src/template/index.js","../src/hooks.js","../src/utils/getFuncName.js","../src/initMixin.js","../src/utils/isNativeTag.js","../src/vdom/index.js","../src/vdom/updateChildren.js","../src/vdom/patchVNode.js","../src/vdom/patch.js","../src/initLifecycle.js","../src/initGlobal.js","../src/index.js"],"sourcesContent":["import observe from \"./index\";\r\n\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'unshift',\r\n    'shift',\r\n    'splice',\r\n    'sort'\r\n]\r\n\r\nvar arrMethods = {}; //arrMethods用于拦截实例数组调用对应的方法\r\n\r\nmethods.forEach(el=>{\r\n    let method = Array.prototype[el]; //将数组原型上的真正方法保存下来\r\n    arrMethods[el] = function() {\r\n        console.log(`触发了数组的${method}方法`)\r\n        switch(el) { //判断具体的调用方法\r\n            case \"push\":\r\n            case \"unshift\":\r\n                Array.from(arguments).forEach(item=>{\r\n                    observe(item);\r\n                })\r\n                break;\r\n            case \"pop\":\r\n            case \"shift\":\r\n                break;\r\n            case \"splice\":\r\n                Array.from(arguments).slice(2).forEach(item=>{\r\n                    observe(item);\r\n                })\r\n                break;\r\n            case 'sort':\r\n                \r\n                break;\r\n        }\r\n        this.__ob__.dep.notify();\r\n        return method.apply(this,arguments);\r\n    }\r\n})\r\n\r\nexport default arrMethods","let id = 0;\r\n\r\nclass Dep {\r\n    constructor() {\r\n        this.id = id++; //id唯一标识一个watcher，也就是说每一个watcher都有一个独有的id号\r\n        this.subs = []; //存储着dep的监听者也就是观察者，当Dep实例对应的属性发生改变时，对应subs中存储的观察者就会触发调用\r\n    }\r\n\r\n    depend() { //get时添加依赖\r\n        if (!this.subs.includes(Dep.target)) {\r\n            this.subs.push(Dep.target);\r\n            if (!Dep.target.deps.includes(this)) {\r\n                Dep.target.deps.push(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    notify() { //set时触发依赖\r\n        this.subs.forEach(watcher => {\r\n            watcher.update();\r\n        })\r\n    }\r\n}\r\n\r\nexport default Dep;","//此模块用于实现数据的响应式    \r\n\r\nimport arrMethods from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nfunction observe(obj) { //observe函数的中作用就是为了将obj对象中的属性都变为访问器属性\r\n    let ob;\r\n    if(typeof obj !== \"object\") return;\r\n    if (obj.__ob__) { // 该对象有__ob__则不进行递归\r\n        ob = obj.__ob__; //给对象添加__ob__表示该对象被观察了，方便程序员的调试\r\n    } else {\r\n        ob = new Observer(obj); //通过new Observer类来标记该对象，也就是给obj上添加__ob__属性来实现观测状态的标记，防止循环引用\r\n    }\r\n    return ob;\r\n}\r\n\r\nclass Observer {\r\n    constructor(obj) {\r\n        obj.__ob__ = this;\r\n        this.dep = new Dep(); //dep可以看成是依赖收集器\r\n        Object.defineProperty(obj,\"__ob__\",{\r\n            enumerable:false,\r\n            writable:false,\r\n            configurable:false\r\n        })\r\n        if(Array.isArray(obj)) {\r\n            this.walkArray(obj)\r\n        } else {\r\n            this.walk(obj)\r\n        }\r\n    }\r\n\r\n    walk(obj) {\r\n        Object.keys(obj).forEach(key=>{\r\n            defineReactive(obj,key)\r\n        })\r\n    }\r\n\r\n    walkArray(obj) {\r\n        Object.setPrototypeOf(obj,arrMethods);\r\n        for(let el of obj) {\r\n            observe(el);\r\n        }\r\n    }\r\n}\r\n\r\nfunction dependArray(arr) { //递归地为每一个数组都添加dep收集器属性，一旦当发生数组的push,pop等改变原数组的方法时触发watcher的调用也就是模板的重新编译\r\n    if(Array.isArray(arr)) {\r\n        arr.__ob__.dep.depend();\r\n        for(let el of arr) dependArray(el)\r\n    }\r\n}\r\n\r\n//递归地定义响应式数据\r\nfunction defineReactive(obj,key,data) {\r\n    data = data || obj[key];\r\n    let dep = new Dep(); //每一个属性都对应一个Dep的实例\r\n    observe(obj[key]); //先将obj[key]对应的属性值也变成响应式的\r\n    Object.defineProperty(obj,key,{\r\n        get() { //get时收集依赖\r\n            if(Dep.target) {\r\n                dep.depend();\r\n                if(Array.isArray(data)) {\r\n                    dependArray(data);\r\n                }\r\n            }\r\n            return data;\r\n        },\r\n        set(newVal) { //set时触发依赖\r\n            if(newVal !== data) {\r\n                observe(newVal); //先将传入的newVal也变成访问器属性\r\n                data = newVal;\r\n                dep.notify();\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport default observe;","export function nextTick(fn) {\r\n    Promise.resolve().then(()=>fn());\r\n}","import Dep from \"./dep\";\r\nimport { nextTick } from '../nextTick'\r\nlet id = 0;\r\n\r\nlet stack = [];\r\nfunction pushTarget(watcher) {\r\n    stack.push(watcher);\r\n    Dep.target = watcher;\r\n}\r\n\r\nfunction popTarget() {\r\n    stack.pop();\r\n    Dep.target = stack[stack.length - 1];\r\n}\r\n\r\nclass Watcher {\r\n    constructor(vm, fn, options,cb) {\r\n        this.vm = vm;\r\n        this.id = id++;\r\n        this.getter = fn; //fn很大概率为渲染视图的函数\r\n        this.deps = []; //deps数组中存储着该观察者订阅了多少了变量对象\r\n        this.cb = cb || (()=>{});\r\n        if(options) {\r\n            this.lazy = options.lazy || false;\r\n            this.dirty = this.lazy;\r\n            this.user = options.user;\r\n        }\r\n        \r\n        if(!this.dirty) this.value = this.get();\r\n    }\r\n\r\n    evaluate() {\r\n        this.dirty = false;\r\n        return this.get();\r\n    }\r\n\r\n    depend() {\r\n        this.deps.forEach(dep=>{\r\n            dep.depend();\r\n        })\r\n    }\r\n\r\n    get() {\r\n        pushTarget(this);\r\n        let value = this.getter.call(this.vm);\r\n        popTarget();\r\n        return value;\r\n    }\r\n\r\n    update() { //当watcher依赖的属性发生变化的时候执行watcher中的update方法\r\n        if(this.user) { \r\n            let oldVal = this.value;\r\n            let newVal = this.get();\r\n            this.cb.call(this.vm,newVal,oldVal);\r\n        } else {\r\n            if(this.lazy) {\r\n                this.dirty = true;\r\n            } else {\r\n                queueWatcher(this);\r\n            }\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    run() { //启动watcher的执行\r\n        this.get();\r\n    }\r\n}\r\n\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;\r\n\r\nfunction flushScheduleQueue() { //实现视图的异步更新\r\n    let coppyQueue = queue.slice(0);\r\n    queue = [];\r\n    has = {};\r\n    pending = false;\r\n    coppyQueue.forEach(watcher => {\r\n        watcher.run();\r\n    })\r\n}\r\n\r\nfunction queueWatcher(watcher) {\r\n    const id = watcher.id;\r\n    if (!has[id]) {\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        if (!pending) {\r\n            pending = true;\r\n            nextTick(flushScheduleQueue);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher;","let LIFECYCLE = [ //存放Vue实例的生命周期数组\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    'beforeUpdate',\r\n    'updated',\r\n    'beforeDestory',\r\n    'destoryed'\r\n]\r\n\r\nlet strategy = {} //策略数组\r\n\r\nstrategy['components'] = function (p, c, Vue) {\r\n    if (p && c) {\r\n        Object.setPrototypeOf(c, p);\r\n    }\r\n    for (let name in c) {\r\n        c[name] = typeof c[name] === 'function' ? c[name] : Vue.extend(c[name])\r\n    }\r\n    return c;\r\n}\r\n\r\nLIFECYCLE.forEach(hook => { //对于所有的生命周期钩子其具体的更新策略\r\n    strategy[hook] = function (p, c) {\r\n        if (p) {\r\n            if (c) {\r\n                return p.concat(c);\r\n            } else {\r\n                return p;\r\n            }\r\n        } else {\r\n            return [c];\r\n        }\r\n    }\r\n})\r\n\r\nexport default function mergeOptions(cons, child) {\r\n\r\n    const options = {};\r\n\r\n    if(!child.components) child.components = {};\r\n    let parent = cons.options;\r\n    for (let key in parent) {\r\n        mergeFiled(key);\r\n    }\r\n    for (let key in child) {\r\n        if (!parent.hasOwnProperty(key)) mergeFiled(key);\r\n    }\r\n\r\n    function mergeFiled(key) { //对于不同的key有不同的合并策略，例如对于key = data时合并需要新的覆盖旧的选项，而对于key = created这种生命周期钩子则需要合并成一个数组\r\n        if (strategy[key]) {\r\n            options[key] = strategy[key](parent[key], child[key], cons)\r\n        } else { //如果对应的key在策略数组中不存在的话则进行默认的合并方式也就是新的覆盖旧的,子覆盖父\r\n            options[key] = child[key] || parent[key];\r\n        }\r\n    }\r\n\r\n    return options;\r\n}","const ELEMENT_TYPE = 1; //元素节点\r\nconst TEXT_TYPE = 2; //文本节点\r\nconst textRegExp = /\\{\\{\\s*(.+?)\\}\\}/g //匹配mustache模板字符串\r\nfunction genText(text) { //用于生成mustache类型的模板字符串\r\n    if(textRegExp.test(text)) {\r\n        let match;\r\n        let tokens = [];\r\n        textRegExp.lastIndex = 0;\r\n        let lastIndex = textRegExp.lastIndex;\r\n        while(match = textRegExp.exec(text)) {\r\n            let index = match.index;\r\n            if(index>lastIndex) tokens.push(`${JSON.stringify(text.slice(lastIndex,index))}`);\r\n            tokens.push(`_s(${match[1]})`);\r\n            lastIndex = textRegExp.lastIndex;\r\n        }\r\n        tokens.push(`${JSON.stringify(text.slice(lastIndex))}`);\r\n        return `_v(${tokens.join(\"+\")})`\r\n    } else {\r\n        return `_v(${JSON.stringify(text)})`\r\n    }\r\n}\r\n\r\nfunction genChildren(children) { //生成子节点对应的字符串\r\n    let res = ``;\r\n    res += `[`;\r\n\r\n    res += children.map(child => {\r\n        //首先判断节点类型\r\n        if (child.type === ELEMENT_TYPE) { //元素节点的话\r\n            return `${genCode(child)}`;\r\n        } else if (child.type === TEXT_TYPE) { //文本节点的话\r\n            return `${genText(child.text)}`;\r\n        }\r\n    }).join(\",\");\r\n    res += ']';\r\n    return res;\r\n}\r\n\r\nfunction genProps(attrs) {\r\n    let res = `{`;\r\n    res += attrs.map(attr => {\r\n        if (attr.key !== \"style\" && attr.key!==\"v-bind:style\") { //如果该属性值不为style的话\r\n            return `${attr.key}:${JSON.stringify(attr.value)}`;\r\n        } else {\r\n            let str = ``;\r\n            str += `style:{`;\r\n            str += attr.value.split(\";\").map(obj => {\r\n                let [key, value] = obj.split(\":\");\r\n                return `${key}:${JSON.stringify(value)}`;\r\n            }).join(\",\");\r\n            str += `}`;\r\n            return str;\r\n        }\r\n    }).join(\",\");\r\n    res += `}`;\r\n    return res;\r\n}\r\n\r\nexport function genCode(node) { //根据AST语法树拼接JS字符串\r\n    return `_c(${JSON.stringify(node.tagName)}${node.attrs.length === 0 ? \",undefined\" : \",\" + genProps(node.attrs)}${node.children.length > 0 ? \",\" + genChildren(node.children) : \"\"})`\r\n}","const cname = `[a-zA-Z_][\\\\-\\\\.a-zA-Z0-9_]*` //标签可能出现的所有标签名\r\nconst qnameCapture = `((?:${cname}:)?${cname})` //考虑到带有命名空间的标签出现的情况因此在此处使用(?:${cname}:)?表明括号中的捕获重复0-1次\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //开始标签的前面open部分，也就是 < 往后的标签名部分\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst startTagClosed = /^\\s*(\\/)?>/ //开始标签的结束部分，(\\/)?是防止该标签是自闭合标签 ，例如<input xx />\r\nconst attribute = /^\\s*([^\\s'\"<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"|'([^']*)'|([^\\s'\"<>\\/=]+)))?/ //匹配标签中的属性，格式为key= value\r\n\r\n//parseHtml用于解析模板生成AST抽象语法树\r\nexport function parseHTML(html) {\r\n    const ELEMENT_TYPE = 1; //元素节点\r\n    const TEXT_TYPE = 2; //文本节点\r\n    const ROOT_TYPE = 3;\r\n    const root = {\r\n        children:[],\r\n        type:ROOT_TYPE,\r\n        parent:null,\r\n        tagName:\"Root\"\r\n    }\r\n    const stack = [root];\r\n    let textEnd;\r\n    function advance(n) {\r\n        html = html.slice(n);\r\n    }\r\n\r\n    function parseStartTagOpen() {\r\n        let tagName = html.match(startTagOpen)[1];\r\n        let resName = html.match(startTagOpen)[0];\r\n\r\n        let tag = {\r\n            tagName,\r\n            parent: stack[stack.length - 1] || null,\r\n            children: [],\r\n            attrs: [],\r\n            type:ELEMENT_TYPE\r\n        }\r\n        stack[stack.length-1].children.push(tag);\r\n        stack.push(tag);\r\n        \r\n        advance(resName.length);\r\n    }\r\n    function parseAttrs() { //解析标签中的所有属性\r\n        let currentNode = stack[stack.length - 1];\r\n        while (!startTagClosed.test(html)) {\r\n            let resArry = html.match(attribute);\r\n            let attr = {\r\n                key: resArry[1],\r\n                value: resArry[3] || resArry[4] || resArry[5] || true\r\n            }\r\n            currentNode.attrs.push(attr);\r\n            advance(html.match(attribute)[0].length);\r\n        }\r\n    }\r\n\r\n    function parseStartTagClosed() { //处理开始标签的末尾/结束部分\r\n        let resName = html.match(startTagClosed)[0];\r\n        advance(resName.length);\r\n    }\r\n\r\n    function parseEndTag() {\r\n        let resName = html.match(endTag)[0];\r\n        stack.pop();\r\n        advance(resName.length);\r\n    }\r\n\r\n    function parseText() {\r\n        let text = html.substr(0, textEnd);\r\n        if(/[^\\s]+/.test(text)) stack[stack.length-1].children.push({\r\n            text,\r\n            type:TEXT_TYPE,\r\n            parent:stack[stack.length-1] || null\r\n        })\r\n        advance(text.length);\r\n    }\r\n\r\n    while (html.length) {\r\n        textEnd = html.indexOf(\"<\");\r\n        if (textEnd === 0) {\r\n            if (!endTag.test(html)) { //如果该<字符是开始标签上的字符时\r\n                parseStartTagOpen();\r\n                parseAttrs();\r\n                parseStartTagClosed();\r\n            } else {\r\n                parseEndTag();\r\n            }\r\n        } else {\r\n            parseText();\r\n        }\r\n    }\r\n\r\n    return root;\r\n\r\n}","import { genCode } from \"./gen\"\r\nimport { parseHTML } from \"./parse\"\r\n\r\n//该模块用于模板编译功能的实现\r\nexport default function compileToFunction(html) {\r\n    //1.生成AST抽象语法树\r\n    let ast = parseHTML(html);\r\n\r\n    //2.根据抽象语法树生成JS字符串\r\n    let code = genCode(ast.children[0]);\r\n\r\n    let render = new Function(`with(this){return ${code}}`); //通过new Function这种形式形成最终的render函数\r\n\r\n    console.log(render);\r\n\r\n    return render;\r\n}","export function callHooks(vm,hooks) { //触发特定的生命周期钩子函数\r\n    if(vm.$options[hooks]) {\r\n        vm.$options[hooks].forEach(hook=>{\r\n            hook.call(vm)\r\n        });\r\n    }\r\n}","export default function getFunctionName(fun) {\r\n    if (fun.name !== undefined)\r\n        return fun.name;\r\n    var ret = fun.toString();\r\n    ret = ret.substr('function '.length);\r\n    ret = ret.substr(0, ret.indexOf('('));\r\n    return ret;\r\n}","import observe from \"./data/index\";\r\nimport Watcher from \"./data/watcher\";\r\nimport mergeOptions from \"./mergeOptions\";\r\nimport { nextTick } from \"./nextTick\";\r\nimport compileToFunction from \"./template/index.js\";\r\nimport { callHooks } from './hooks'\r\nimport getFuncName from './utils/getFuncName'\r\nimport Dep from \"./data/dep\";\r\n//该函数用于对Vue的状态进行初始化\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        let vm = this;\r\n        vm.$options = mergeOptions(Vue, options); //合并实例化传入的局部options选项和全局Vue上的options选项\r\n        callHooks(vm, 'beforeCreate')\r\n        initState(vm); //对options中的所有配置选项进行初始化，包括data.props,method,watch,computed,direactives等\r\n        callHooks(vm, 'created');\r\n        initTemplate(vm); //在传入的配置选项全部初始化完成后开始执行模板的编译生成虚拟DOM\r\n    }\r\n\r\n    Vue.prototype.$mount = function (el) { //$mount函数的作用就是开始模板编译生成render函数的过程并且将render生成的虚拟DOM渲染成真实的DOM并且挂载到DOM树上\r\n        let vm = this;\r\n        let opts = vm.$options;\r\n        if (!opts.render) { //如果没有render函数的话则需要进行模板编译\r\n            let template;\r\n            if (opts.template) { //template的优先级大于el\r\n                template = opts.template;\r\n            } else {\r\n                template = document.querySelector(el).outerHTML;\r\n            }\r\n            opts.render = compileToFunction(template); //compileToFunction开始进入模板编译阶段\r\n        } else { //如果有render函数的话则直接进行调用，无需经过模板编译的过程\r\n            //此处直接跳过\r\n        }\r\n        mountComponent(el, vm); //生成并且渲染虚拟DOM上树\r\n    }\r\n\r\n    Vue.prototype.$nextTick = nextTick;\r\n\r\n    Vue.prototype.$watch = function (expr, cb) {\r\n        let fn = () => this[expr];\r\n\r\n        return new Watcher(this, fn, { user: true }, cb)\r\n    }\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = typeof vm.$options.data === 'function' ? vm.$options.data() : vm.$options.data\r\n    observe(data);\r\n    vm._data = data; //数据劫持\r\n    for (let key in data) {\r\n        //直接将data中的属性绑定到vm实例上，进行了一次数据代理\r\n        Object.defineProperty(vm, key, {\r\n            get() {\r\n                return data[key];\r\n            },\r\n            set(val) {\r\n                data[key] = val;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nfunction getComputedProperty(context, key) {\r\n    return function () {\r\n        let watcher = context._computedWatchers[key]\r\n        if (watcher.dirty) {\r\n            watcher.value = watcher.evaluate();\r\n            if (Dep.target) {\r\n                watcher.depend();\r\n            }\r\n        }\r\n        return watcher.value;\r\n    }\r\n}\r\n\r\nfunction defineComputedProperty(vm, key, computed) {\r\n    let getter = typeof computed === 'function' ? computed : computed.get;\r\n    let setter = typeof computed === 'function' ? (() => { }) : (computed.set || (() => { }));\r\n    let name = typeof computed === 'function' ? getFuncName(computed) : computed;\r\n\r\n    Object.defineProperty(vm, name, {\r\n        get: getComputedProperty(vm, key),\r\n        set: setter\r\n    });\r\n}\r\n\r\nfunction initComputed(vm) { //初始化计算属性\r\n    let computeds = vm.$options.computed;\r\n    let watchers = vm._computedWatchers = {};\r\n    for (let key in computeds) {\r\n        let getter = typeof computeds[key] === 'function' ? computeds[key] : computeds[key].get;\r\n        watchers[key] = new Watcher(vm, getter, { lazy: true });\r\n        defineComputedProperty(vm, key, computeds[key]);\r\n    }\r\n}\r\n\r\nfunction initWatch(vm) { //初始化监视属性\r\n    let watches = vm.$options.watch;\r\n    for (let key in watches) {\r\n        let watch = watches[key];\r\n        let handler = typeof watch === 'function' ? watch : watch.handler;\r\n        let propName = typeof watch === 'function' ? getFuncName(watch) : key;\r\n\r\n        vm.$watch(propName, handler);\r\n    }\r\n\r\n}\r\n\r\nfunction initState(vm) {\r\n    let opts = vm.$options;\r\n    if (opts.data) {\r\n        initData(vm); //初始化数据\r\n    }\r\n    if (opts.computed) {\r\n        initComputed(vm); //初始化计算属性\r\n    }\r\n    if (opts.watch) {\r\n        initWatch(vm);\r\n    }\r\n}\r\n\r\nfunction initTemplate(vm) {\r\n    if (vm.$options.el) { //如果options中包含有el属性则自动调用$mount方法进行模板编译过程\r\n        vm.$mount(vm.$options.el);\r\n    }\r\n}\r\n\r\nfunction mountComponent(el, vm) {\r\n\r\n    let updateComponet = () => { //模板的重新编译或者初次编译\r\n        let dom;\r\n        if (vm._vnode) {\r\n            dom = vm._vnode;\r\n        } else {\r\n            dom = document.querySelector(el);\r\n        }\r\n        vm._update(dom);\r\n    }\r\n    let watcher = new Watcher(vm, updateComponet); //watcher观察者，通常一个Vue实例或者一个Vue组件对应一个Watcher实例，也就是观察者对象\r\n\r\n}","export default function  isNativeTag(tag) {\r\n    return ['div','span','h1','h2','h3','h4','h5','h6','nav','section','header','footer','a','p','i','input','button'].includes(tag)\r\n}","function vnode(vm,tag,key,props,children,text,type) { //该函数用于生成虚拟dom节点\r\n    return {\r\n        vm,\r\n        tag,\r\n        key,\r\n        props,\r\n        children,\r\n        text,\r\n        type\r\n    }\r\n}\r\n\r\n\r\nexport function createElementVNode(vm,tag,props,children) { //创建元素类型的虚拟节点\r\n    if(!props) props = {};\r\n    let key = props.key;\r\n    if(props.key) delete props.key;\r\n    return vnode(vm,tag,key,props,children,undefined,\"tag\");\r\n}\r\n\r\nexport function createTextVNode(vm,text) { //创建文本类型的节点\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text,\"text\");\r\n}\r\n\r\nexport function createComponentVNode(vm,tag,props,children) { //创建组件类型的虚拟节点\r\n    return vnode(vm,tag,undefined,props,children,undefined,\"component\");\r\n}","import { isSame } from \"./patch\";\r\nimport { patchVNode } from \"./patchVNode\";\r\n\r\nexport function updateChildren(parentNode, oldCh, newCh) {\r\n    //我们需要注意的是diff算法本质上比较的是新旧虚拟节点，改变的是真正的DOM元素\r\n    //新旧指针\r\n    let oldStartIdx = 0,\r\n        oldEndIdx = oldCh.length - 1,\r\n        newStartIdx = 0,\r\n        newEndIdx = newCh.length - 1;\r\n    //新旧节点\r\n    let oldStartVnode = oldCh[0],\r\n        oldEndVnode = oldCh[oldEndIdx],\r\n        newStartVnode = newCh[0],\r\n        newEndVnode = newCh[newEndIdx];\r\n\r\n    let map = {}; //进行旧节点上key和下标index之间的映射，也就是缓存策略\r\n    for (let i = oldStartIdx; i <= oldEndIdx; i++) {\r\n        map[oldCh[i].key] = i;\r\n    }\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n        //开始进行四次命中策略\r\n        // 1.旧前和新前对比,命中是同一个节点的话，更新这两个节点\r\n        if (isSame(oldStartVnode, newStartVnode)) {\r\n            // console.log(\"旧前和新前命中\");\r\n            patchVNode(oldStartVnode, newStartVnode); //对于相同的节点调用patchVnode对节点的内部进行最小量更新\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            if (!oldStartVnode) oldStartVnode = oldCh[++oldStartIdx];\r\n            newStartVnode = newCh[++newStartIdx];//指针向下移\r\n        } else if (isSame(oldEndVnode, newEndVnode)) {\r\n            // console.log(\"旧后和新后命中\");\r\n            patchVNode(oldEndVnode, newEndVnode);\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            if (!oldEndVnode) oldEndVnode = oldCh[--oldEndIdx];\r\n            newEndVnode = newCh[--newEndIdx];\r\n        } else if (isSame(oldStartVnode, newEndVnode)) {\r\n            // console.log(\"旧前和新后命中\");\r\n            patchVNode(oldStartVnode, newEndVnode);\r\n            // 意味着此时需要移动旧前指向的节点\r\n            parentNode.insertBefore(oldStartVnode.dom, oldEndVnode.dom.nextSibling);\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            if (!oldStartVnode) oldStartVnode = oldCh[++oldStartIdx];\r\n            newEndVnode = newCh[--newEndIdx];\r\n        } else if (isSame(oldEndVnode, newStartVnode)) {\r\n            // console.log(\"旧后和新前命中\");\r\n            patchVNode(oldEndVnode, newStartVnode);\r\n\r\n            parentNode.insertBefore(oldEndVnode.dom, oldStartVnode.dom); //将旧后节点插入到旧前的节点之前\r\n\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            if (!oldEndVnode) oldEndVnode = oldCh[--oldEndIdx];\r\n            newStartVnode = newCh[++newStartIdx];\r\n        } else { //如果四种情况都没有命中的话，则需要查找newStartVnode对应的在老节点中的下标\r\n            let vnodeInOld = map[newStartVnode.key] || undefined;\r\n            if (vnodeInOld !== undefined) {\r\n                parentNode.insertBefore(oldCh[vnodeInOld].dom, oldCh[oldStartIdx].dom);\r\n                oldCh[vnodeInOld] = undefined;\r\n            } else { //如果查找新节点在老节点中不存在的话则直接创建并且插入到oldStartIdx之前\r\n                parentNode.insertBefore(createElement(newCh[newStartIdx]), oldCh[oldStartIdx].dom);\r\n            }\r\n            newStartVnode = newCh[++newStartIdx];\r\n        }\r\n\r\n    }\r\n    //1. 在所有循环都结束后来查看指针的情况，看看还有没有节点遗留在外面的\r\n    if (newStartIdx <= newEndIdx) { //说明有新的节点需要插入到老节点中去\r\n        let pivot = oldCh[oldEndIdx] ? oldCh[oldEndIdx].dom.nextSibling : null;\r\n        for (let i = newStartIdx; i <= newEndIdx; i++) {\r\n            parentNode.insertBefore(createElement(newCh[i]), pivot);\r\n        }\r\n    } else if (oldStartIdx <= oldEndIdx) { //说明还有老节点需要删除\r\n        for (let i = oldStartIdx; i <= oldEndIdx; i++) {\r\n            if (oldCh[i].dom) {\r\n                parentNode.removeChild(oldCh[i].dom);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { createElement, isSame } from \"./patch\";\r\nimport { updateChildren } from \"./updateChildren\";\r\n\r\nexport function patchVNode(oldVNode, newVNode) { //该函数用于比较两个虚拟节点进行最小量的更新\r\n    if (!isSame(oldVNode, newVNode)) {\r\n        //如果不是相同节点，则拆除旧的，用新的节点来替换\r\n        let dom = createElement(newVNode);\r\n        oldVNode.el.parentNode.replaceChild(dom, oldVNode.el);\r\n    } else {\r\n        if (newVNode.text) {\r\n            oldVNode.el.parentNode.innerHTML = newVNode.text;\r\n        } else {\r\n            if (oldVNode.text) {\r\n                let dom = createElement(newVNode);\r\n                oldVNode.el.parentNode.appendChild(dom);\r\n                oldVNode.el.parentNode.removeChild(oldVNode.el);\r\n            } else {\r\n                //如果是相同的节点则先更新节点的属性\r\n                updateProps(oldVNode, newVNode);\r\n                if (!oldVNode.children) {\r\n                    let children = newVNode.children || [];\r\n                    for (let child of children) {\r\n                        let dom = createElement(child);\r\n                        oldVNode.el.appendChild(dom);\r\n                    }\r\n                } else if (!newVNode.children) {\r\n                    oldVNode.el.innerHTML = \"\";\r\n                } else if (oldVNode.children && newVNode.children) {\r\n                    updateChildren(oldVNode.el, oldVNode.children, newVNode.children);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function updateProps(oldVNode, newVNode) {\r\n    let oldProps = oldVNode.props;\r\n    let newProps = newVNode.props;\r\n\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let item in newProps.style) {\r\n                oldVNode.el.style[item] = newProps.style[item];\r\n            }\r\n        } else {\r\n            oldVNode.el[key] = newProps[key];\r\n        }\r\n    }\r\n\r\n    for (let key in oldProps) {\r\n        if (!newProps[key]) {\r\n            oldVNode.el.removeAttribute(key);\r\n        } else {\r\n            if (key === 'style') {\r\n                let oldStyle = oldProps.style;\r\n                let newStyle = newProps.style;\r\n                updateStyle(oldStyle, newStyle, oldVNode.el);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction updateStyle(oldStyle, newStyle, el) {\r\n    for (let key in oldStyle) {\r\n        if (!newStyle[key]) {\r\n            el.style.removeAttribute(key);\r\n        }\r\n    }\r\n\r\n    for (let key in newStyle) {\r\n        el.style[key] = newStyle[key];\r\n    }\r\n}","import { callHooks } from \"../hooks\";\r\nimport { patchVNode } from \"./patchVNode\";\r\n\r\nfunction appendAttrs(vnode) {\r\n    for (let key in vnode.props) {\r\n        if (key === 'style') {\r\n            for (let item in vnode.props.style) {\r\n                vnode.el.style[item] = vnode.props.style[item];\r\n            }\r\n        } else {\r\n            vnode.el.setAttribute(key, vnode.props[key]);\r\n        }\r\n    }\r\n}\r\nexport function createElement(vnode, vm) { //根据虚拟节点vnode创建对应的真实DOM元素\r\n    if (vnode.tag) {\r\n        if (vnode.type === 'tag') {\r\n            vnode.el = document.createElement(vnode.tag);\r\n            appendAttrs(vnode);\r\n            if (vnode.children) {\r\n                vnode.children.forEach(child => {\r\n                    vnode.el.appendChild(createElement(child, vm));\r\n                })\r\n            }\r\n        } else if (vnode.type === 'component') {\r\n            let com = new vm.$options.components[vnode.tag]();\r\n\r\n            let container = document.createElement(\"div\");\r\n            container.id = \"container\";\r\n            document.body.appendChild(container);\r\n\r\n            com.$mount(\"#container\");\r\n\r\n            return com._vnode.el;\r\n        }\r\n\r\n    } else {\r\n        vnode.el = document.createTextNode(vnode.text);\r\n    }\r\n    return vnode.el;\r\n\r\n}\r\n\r\nexport function isSame(vnode1, vnode2) { //判断是否为同一虚拟节点\r\n    return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key;\r\n}\r\n\r\nexport function patch(oldVNode, newVNode, vm) {\r\n    if (oldVNode.nodeType === 1) { //如果是真实的DOM元素的话则进行初次渲染\r\n        callHooks(vm,\"beforeMount\");\r\n        let dom = createElement(newVNode, vm);\r\n        oldVNode.parentNode.insertBefore(dom, oldVNode.nextSibling);\r\n        oldVNode.parentNode.removeChild(oldVNode);\r\n        oldVNode.el = dom;\r\n        callHooks(vm,\"mounted\");\r\n    } else { //如果不是则需要进入diff算法环节比较新旧虚拟节点的差异\r\n        callHooks(vm,\"beforeUpdate\");\r\n        patchVNode(oldVNode, newVNode);\r\n        newVNode.el = oldVNode.el;\r\n        callHooks(vm,\"updated\");\r\n    }\r\n    //根据diff算法更新旧的真实DOM节点\r\n    vm._vnode = newVNode;\r\n}","import isNativeTag from \"./utils/isNativeTag\";\r\nimport { createComponentVNode, createElementVNode, createTextVNode } from \"./vdom/index\" //创建不同类型的虚拟节点\r\nimport { patch } from \"./vdom/patch\";\r\n\r\n\r\nexport function initLifeCycle(Vue) {\r\n    Vue.prototype._c = function(tag,props,children) { //创建元素节点\r\n        if(isNativeTag(tag)) {\r\n            return createElementVNode(this,...arguments);\r\n        }\r\n        return createComponentVNode(this,...arguments);\r\n    }\r\n\r\n    Vue.prototype._s = function(val) { \r\n        if(typeof val ==='object') {\r\n            val = JSON.stringify(val); //触发了data中数据的set方法\r\n        }\r\n        return val;\r\n    }\r\n\r\n    Vue.prototype._v = function(text) { //创建文本节点\r\n        return createTextVNode(this,text);\r\n    }\r\n\r\n    Vue.prototype._render = function() { //调用vm实例上的render函数创建对应的虚拟DOM\r\n        let vm = this;\r\n        return vm.$options.render.call(vm); //所谓的render函数就是之前拼接字符串生成的函数\r\n    }\r\n\r\n    Vue.prototype._update = function(el) { //将虚拟DOM转变为真实DOM并且挂载到DOM树上\r\n        let vm = this;\r\n        let vdom = vm._render();\r\n        patch(el,vdom,vm);\r\n    }\r\n}\r\n","import mergeOptions from \"./mergeOptions\"\r\n\r\nexport function initGlobal(Vue) {\r\n    Vue.mixin = function(options) { //给Vue构造函数上添加全局的api函数\r\n        Vue.options = mergeOptions(Vue.options,options)\r\n    }\r\n\r\n    Vue.extend = function(options) { //该静态方法用于生成组件的实例对象\r\n\r\n        function Sub() { //Sub是Vue的子类\r\n            this._init(options);\r\n        }\r\n\r\n        Sub.prototype = Object.create(Vue.prototype);\r\n        Sub.prototype.constructor = Sub;\r\n\r\n        Sub.extendOptions = options;\r\n        return Sub;\r\n    }\r\n\r\n    Vue.component = function(name,component) { //申明一个全局组件\r\n        component = typeof component === 'function' ? component : Vue.extend(component);\r\n\r\n        Vue.options.components[name] = component;\r\n    }\r\n}","import { initMixin } from \"./initMixin\";\r\nimport { initLifeCycle } from \"./initLifecycle\";\r\nimport { initGlobal } from \"./initGlobal\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options); //初始化Vue\r\n}\r\n\r\nVue.options = {};//全局的公共配置选项\r\nVue.options.components = {}\r\n\r\n//init...方法是向vue实例的原型对象上添加方法\r\ninitLifeCycle(Vue);\r\ninitMixin(Vue);\r\ninitGlobal(Vue);\r\n\r\nexport default Vue;"],"names":["methods","arrMethods","forEach","el","method","Array","prototype","console","log","from","arguments","item","observe","slice","__ob__","dep","notify","apply","id","Dep","subs","includes","target","push","deps","watcher","update","obj","ob","Observer","Object","defineProperty","enumerable","writable","configurable","isArray","walkArray","walk","keys","key","defineReactive","setPrototypeOf","dependArray","arr","depend","data","get","set","newVal","nextTick","fn","Promise","resolve","then","stack","pushTarget","popTarget","pop","length","Watcher","vm","options","cb","getter","lazy","dirty","user","value","call","oldVal","queueWatcher","queue","has","pending","flushScheduleQueue","coppyQueue","run","LIFECYCLE","strategy","p","c","Vue","name","extend","hook","concat","mergeOptions","cons","child","components","parent","mergeFiled","hasOwnProperty","ELEMENT_TYPE","TEXT_TYPE","textRegExp","genText","text","test","match","tokens","lastIndex","exec","index","JSON","stringify","join","genChildren","children","res","map","type","genCode","genProps","attrs","attr","str","split","node","tagName","cname","qnameCapture","startTagOpen","RegExp","endTag","startTagClosed","attribute","parseHTML","html","ROOT_TYPE","root","textEnd","advance","n","parseStartTagOpen","resName","tag","parseAttrs","currentNode","resArry","parseStartTagClosed","parseEndTag","parseText","substr","indexOf","compileToFunction","ast","code","render","Function","callHooks","hooks","$options","getFunctionName","fun","undefined","ret","toString","initMixin","_init","initState","initTemplate","$mount","opts","template","document","querySelector","outerHTML","mountComponent","$nextTick","$watch","expr","initData","_data","val","getComputedProperty","context","_computedWatchers","evaluate","defineComputedProperty","computed","setter","getFuncName","initComputed","computeds","watchers","initWatch","watches","watch","handler","propName","updateComponet","dom","_vnode","_update","isNativeTag","vnode","props","createElementVNode","createTextVNode","createComponentVNode","updateChildren","parentNode","oldCh","newCh","oldStartIdx","oldEndIdx","newStartIdx","newEndIdx","oldStartVnode","oldEndVnode","newStartVnode","newEndVnode","i","isSame","patchVNode","insertBefore","nextSibling","vnodeInOld","createElement","pivot","removeChild","oldVNode","newVNode","replaceChild","innerHTML","appendChild","updateProps","oldProps","newProps","style","removeAttribute","oldStyle","newStyle","updateStyle","appendAttrs","setAttribute","com","container","body","createTextNode","vnode1","vnode2","patch","nodeType","initLifeCycle","_c","_s","_v","_render","vdom","initGlobal","mixin","Sub","create","constructor","extendOptions","component"],"mappings":"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"}